<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>02-diffing算法的原理</title>
  <script src="../js/react.development.js"></script>
  <script src="../js/react-dom.development.js"></script>
  <script src="../js/babel.js"></script>
</head>
<body>
  <div id="app"></div>

  <script type="text/babel">
    class Person extends React.Component {
      state = {
        people: [
          { id: '001', name: '小米', age: 15 },
          { id: '002', name: '小浪', age: 18 },
        ],
      };

      addXiaoWang = () => {
        this.setState({
          people: [
            { id: '003', name: '小王', age: 14 },
            ...this.state.people
          ]
        });
      };

      render() {
        const { people } = this.state;
        return (
          <div>
            <button onClick={ this.addXiaoWang }>添加一个小王</button>
            <h2>如下的列表，使用 index (索引值) 作为 key</h2>
            <ul>
              {
                people.map((p, index) => (
                  <li key={ index }>
                    { p.name }-{ p.age }
                    <input type="text" />
                  </li>
                ))
              }
            </ul>

            <hr />
            <h2>如下的列表，使用 id(数据的唯一标识) 作为 key</h2>
            <ul>
              {
                people.map(p => (
                  <li key={ p.id }>
                    { p.name }-{ p.age }
                    <input type="text" />
                  </li>
                ))
              }
            </ul>
          </div>
        );
      };
      
    };

    // 2. 渲染组件到页面
    ReactDOM.render(<Person />, document.getElementById('app'));
  </script>
</body>
</html>
