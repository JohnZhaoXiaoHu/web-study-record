# 移动端基础知识

## 屏幕相关
1. 屏幕大小
**值屏幕对角线长度，单位是英寸(inch)**
备注：1英寸(inch) = 2.54厘米
![image-20210816201704116](/Users/ardor/Desktop/MyGitHub/web-study-record/Mobile-Study/shangguigu/img/inch-screen.png)

2. 屏幕分辨率
是指屏幕在： 横向、纵向上的物理像素点总数。一般表示用 n * m 表示
例如：Iphone6 的屏幕分辨率为： 750*1334
- 注意点：
  - 屏幕分辨率是一个固定值,无法修改！！
  - 屏幕分辨率、显示分辨率是两个概念，系统设置中可以修改的是： 显示分辨率
  - 屏幕分辨率 >= 显示分辨率

3. 屏幕密度
指屏幕上每英寸里包含的物理像素点的个数， 单位ppi， pixels per inch, 其实还有另一个单位，dpi， dots per inch， 两个值得计算方式一样，只是使用场景不同，ppi 主要衡量屏幕，dpi 主要衡量打印机，投影仪

## 像素相关
1. 物理像素
物理像素又名： 设备像素, 是一个长度单位，单位是 px，是实实在在存在的东西，一个物理像素就是屏幕上的一个物理成像点，就是屏幕中一个微小的发光物理物理元器件。

2. CSS 像素
又名逻辑像素，css 像素是一个抽象的长度单位，单位也是 px（pixels），它是为 Web 开发者创造的，用来精确的度量 Web 页面上的内容大小。我们在编写 css，js，less 中所使用的都是 css 像素。

思考： 代码中 4px*4px 的盒子（css 像素），到了屏幕上到底对应几个物理像素（发光的小灯泡）呢？  

3. 设备独立像素
简称 DIP 或者 DP (device-independent pixel)，又称： 屏幕密度无关像素

![image-20210825125253032](/Users/ardor/Desktop/MyGitHub/web-study-record/Mobile-Study/shangguigu/img/DIP.png)
设备独立像素的出现，使得即使在 【高清屏】上元素也可以拥有正常的尺寸，让代码不受到设备的影响，它是设备厂商根据屏幕特性设置的，无法更改

设备独立像素和 css 像素关系
- 在标准情况下（无缩放）： 1 css像素 = 1设备独立像素
设备独立像素与物理像素关系
- 普通屏幕下 1 个设备独立像素 对应 1 个 物理像素
- 高清屏下 1 个设备独立像素 对应 N 个物理像素

4. 像素比

   像素比（dpr）: 单一方向上，【物理像素】和【设备独立像素】的比值。即 dpr = 物理像素 / 设备独立像素

   > 使用 js 获取 dpr: window.devicePixelRatio

   ![image-20210825142344213](/Users/ardor/Desktop/MyGitHub/web-study-record/Mobile-Study/shangguigu/img/dpr.png)

## 图片的高清显示

1. 位图像素

   位图和矢量图

   - 位图，又称点阵图像或栅格图像，是由 n 个像素点组成的。放大后会失真。
   - 矢量图，又称面向对象图或回执图像，在数学上定义为一系列曲线连接的点，放大后不会失真，常见 svg

## 视口相关

### pc 端视口

在 pc 端，视口的默认宽度和浏览器窗口的宽度一致。在 css 标准文档中，视口又被称为：初始包含块。它是 所有 css 百分比宽度推算的根源，在 pc 端可通过如下几种方式获取宽度

### 移动端视口

在移动端，浏览器厂商面临着一个比较大的问题，他们如何将数以万计的 pc 端网页完整的显示在移动端设备上，并且不会出现横向滚动条呢？那就要引出移动端的三个概念：1. 布局视口，2. 视觉视口，3. 理想视口

1. 布局视口

   用于解决早起的页面在手机上显示的问题，早期的时候我们这样做： pc 端网页宽度一般都为： 960px ~ 1024px 这个范围，就算超出了改范围， 960px ~ 1024px 这个区域也依然是版心的位置，浏览器厂商针对移动端设备设计了一个容器，先用这个容器去承接 pc 端网页，这个容器的宽度一般是 980 px，不同的设备可能有所差异，但相差并不大；随后将这个容器等比例的压缩到与手机等宽，这样就可以保证没有横向滚动条且完整呈现页面，但是这样做依然有问题：网页内容被压缩得太小，严重影响用户体验。

   移动端获取布局视口方式：`document.documentElement.clientWidth`

   注意： 布局视口经过压缩后，横向的宽度用 css 像素表达就不再是 375px 了，而是 980px， 因为布局视口是被压缩而不是截图。

   

2. 视觉视口

   视觉视口就是用户可见的区域，它的绝对宽度永远和设备(这里的设备用布局视口来衡量)一样宽，但是这个宽度里所包含的 css 像素值是变化的，例如：一般手机会将 980 个 css 像素放入视觉视口中，而 ipad Pro 会将 1024 个 css 像素放入视觉视口中

   移动端获取视觉视口方式： `window.innerWidth`

3. 理想视口标准
   与屏幕等宽(用设备独立像素来衡量)的布局视口，称之为理想视口。所以也可以说理想视口是一种标准：让布局视口与屏幕等宽（设备独立像素），靠 meta 标签实现
   理想视口的特点：
   - 布局视口和屏幕等宽，以 iphone6 为例，符合理想视口标准之后
      - 设备独立像素： 375px
      - 布局视口宽度： 375px
   - 用户不需要缩放、滚动就能看到网站的全部内容
   - 要为移动端设备单独设计一个移动端网站
   设置理想视口的具体方法
   `<meta name='viewport' content='width=device-width'>`


### 移动端缩放
放大时
- 布局视口不变
- 视觉视口变小

缩小时
- 布局视口不变
- 视觉视口变大

移动端缩放不会影响页面布局，因为缩放的时候，布局视口大小没有变化

### viewport 
meta-viewport 标签是苹果公司在 2007 年引进的，用于移动端布局视口的控制
使用示例：
`<meta name='viewport' content='width=device-width, initial-scale=1.0'>`

viewport 相关选项
1. width 布局视口的宽度
2. initial-scale 【系统】初始缩放比列
3. maximum-scale 允许 【用户】 缩放的最大比例
4. minimum-scale 允许 【用户】 缩放的最大比例
5. user-scale 是否允许用户缩放
6. viewport-fit 设置为 cover 值可以解决刘海屏的留白问题

#### 1. width
width 值可以使 device-width,也可以是具体值，但是有些安卓手机不支持， ios 全系列都支持
#### 2. initial-scale
- initial-scale 为页面初始化时的显示比例
- initial-scale = 屏幕宽度(设备独立像素) / 布局视口像素
- 只写 initial-scale=1.0 也可以实现完美视口，但为了更好的兼容性，`width=device-width, initial-scale=1.0` 都写上

#### 3. maximum-scale
- 设置允许用户最大缩放比例，苹果浏览器 safari 不认识该属性
- maximum-scale=屏幕宽度（设备独立像素）/ 视觉视口宽度值

#### 4. minimum-scale
- 设置允许用户最小缩放比例，苹果浏览器 safari 不认识该属性
- maximum-scale=屏幕宽度（设备独立像素）/ 视觉视口宽度值 

#### 5. user-scalable
- 是否允许用户通过手指缩放页面。苹果浏览器 safari 不认识该属性

#### 6. vueport-fit
- 解决刘海屏问题
viewport-fit 设置为 cover 值可以解决刘海屏的留白问题


# 适配
## 为什么要做适配？
由于移动端设备的屏幕尺寸大小不一，会出现：同一个元素在两个不同的手机上显示效果不一样（比例不容）。要想让同一个元素在不同设备上显示效果一样，就需要适配，无论采用何种适配方案，中心原则永远是： 等比！
主要的适配方案又是那种
- viewport 适配方案
- rem 适配

### viewport 适配 方案
- 方法： 拿到设计稿之后，设置布局视口宽度为设计稿宽度，然后直接按照设计稿给出宽高进行布局即可
```html
<meta name="viewport" content="width=375">
```
- 优点：不用复杂的计算，直接使用图稿上标注的 px 值
- 缺点：
   - 不能使用完整的 meat 标签，会导致在某些安卓手机上有兼容性问题
   - 不希望适配的东西，例如边框，也强制参与了适配

### rem 适配方案
共有两种方案
1. 
核心过程：
- 根字体 = （设备横向独立像素 / 设计稿宽度）* 100
- 编写样式时：
   - 直接以 rem 为单位
   - 值为：设计值 / 100

2. 
核心过程：
- 根字体 = 设备横向独立像素 / 10
- 编写样式时：
   - 直接以 rem 为单位
   - 值为： 设计值 / (设计稿宽度 / 10)